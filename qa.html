<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>常见问题 - 哈萨克国立大学(Al-Faribi)</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="qa-data.js" defer></script>
</head>
<body>
    <!-- 导航菜单 -->
    <nav class="navbar">
        <div class="logo">
            <img src="images/logo.jpg" alt="Al-Faribi大学标志">
        </div>
        <button class="menu-toggle">
            <i class="fas fa-bars"></i>
        </button>
        <div class="nav-links-container">
            <ul class="nav-links">
                <li><a href="index.html">主页</a></li>
                <li><a href="campus-life.html">校园生活</a></li>
                <li><a href="partners.html">合作伙伴</a></li>
                <li><a href="qa.html" class="active">Q&A</a></li>
                <li><a href="about.html">关于我们</a></li>
            </ul>
        </div>
    </nav>

    <!-- 主要内容区域 -->
    <main>
        <section class="qa-section">
            <div class="section-container">

                <!-- 提问表单 -->
                <div id="questionForm" class="question-form" style="display: none;">
                    <h3>发表新问题</h3>
                    <form id="newQuestionForm">
                        <div class="form-group">
                            <label for="questionTitle">问题标题</label>
                            <input type="text" id="questionTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="questionContent">问题详情</label>
                            <textarea id="questionContent" rows="4" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="userName">姓名</label>
                            <input type="text" id="userName" required>
                        </div>
                        <div class="form-group">
                            <label for="contactInfo">联系方式（如急需回复，请留下信息）</label>
                            <input type="text" id="contactInfo" placeholder="邮箱或电话">
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="submit-btn">提交问题</button>
                            <button type="button" class="cancel-btn" onclick="hideQuestionForm()">取消</button>
                        </div>
                    </form>
                </div>

                <!-- 热点问题 -->
                <div class="qa-category hot-questions">
                    <h3><i class="fas fa-fire"></i> 关注热点</h3>
                    <div class="qa-list" id="hotQuestionsList">
                        <!-- 热点问题将通过JavaScript动态加载 -->
                    </div>
                </div>

                <!-- 已回复问题 -->
                <div class="qa-category answered-questions">
                    <h3><i class="fas fa-check-circle"></i> 已回复</h3>
                    <div class="qa-list" id="answeredQuestionsList">
                        <!-- 已回复问题将通过JavaScript动态加载 -->
                    </div>
                </div>

                <!-- 待回复问题 -->
                <div class="qa-category pending-questions">
                    <h3><i class="fas fa-clock"></i> 待回复</h3>
                    <div class="qa-list" id="pendingQuestionsList">
                        <!-- 待回复问题将通过JavaScript动态加载 -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 固定的留言按钮 -->
    <button class="ask-question-btn floating" onclick="showQuestionForm()">
        <i class="fas fa-edit"></i> 我要留言
    </button>



    <!-- JavaScript -->
    <script>
        // 移动端菜单切换
        document.querySelector('.menu-toggle').addEventListener('click', function() {
            document.querySelector('.nav-links-container').classList.toggle('active');
        });

        // 问题表单显示与隐藏
        function showQuestionForm() {
            document.getElementById('questionForm').style.display = 'block';
            window.scrollTo({
                top: document.getElementById('questionForm').offsetTop - 100,
                behavior: 'smooth'
            });
        }

        function hideQuestionForm() {
            document.getElementById('questionForm').style.display = 'none';
        }

        // 创建问题HTML
        function createQuestionHTML(question) {
            return `
                <div class="qa-item" data-id="${question.id}">
                    <div class="question-title">
                        <a href="qa-detail.html?id=${question.id}">${question.title}</a>
                    </div>
                    <div class="question-content">${question.content}</div>
                    <div class="meta-info">${question.date}</div>
                </div>
            `;
        }

        // 格式化内容
        function formatContent(content) {
            if (!content) return '';
            return content.replace(/\n/g, '<br>');
        }



        // 加载问题列表
        function loadQuestions() {
            // 热点问题
            const hotQuestionsHTML = qaData.hotQuestions
                .filter(q => q.isVisible)
                .map(createQuestionHTML)
                .join('');
            document.getElementById('hotQuestionsList').innerHTML = hotQuestionsHTML;

            // 已回复问题
            const answeredQuestionsHTML = qaData.answeredQuestions
                .filter(q => q.isVisible)
                .map(createQuestionHTML)
                .join('');
            document.getElementById('answeredQuestionsList').innerHTML = answeredQuestionsHTML;

            // 待回复问题
            const pendingQuestionsHTML = qaData.pendingQuestions
                .filter(q => q.isVisible)
                .map(createQuestionHTML)
                .join('');
            document.getElementById('pendingQuestionsList').innerHTML = pendingQuestionsHTML;
        }

        // 处理问题提交
        document.getElementById('newQuestionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // 获取表单数据
            const title = document.getElementById('questionTitle').value;
            const content = document.getElementById('questionContent').value;
            const userName = document.getElementById('userName').value;
            const contact = document.getElementById('contactInfo').value;

            // 创建新问题
            const newQuestion = addNewQuestion({
                title,
                content,
                author: userName,
                contactInfo: contact
            });

            // 重新加载问题列表
            loadQuestions();
            
            // 清空表单并隐藏
            this.reset();
            hideQuestionForm();

            // 显示提示
            alert('问题提交成功！管理员会尽快回复。');
        });

        // 页面加载完成后加载问题
        document.addEventListener('DOMContentLoaded', loadQuestions);

        // 移动端菜单切换
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinksContainer = document.querySelector('.nav-links-container');

        menuToggle.addEventListener('click', function() {
            navLinksContainer.classList.toggle('active');
            const icon = this.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
        });

        const navLinks = document.querySelectorAll('.nav-links a');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                navLinksContainer.classList.remove('active');
                menuToggle.querySelector('i').classList.remove('fa-times');
                menuToggle.querySelector('i').classList.add('fa-bars');
            });
        });

        document.addEventListener('click', function(e) {
            if (!e.target.closest('.navbar')) {
                navLinksContainer.classList.remove('active');
                menuToggle.querySelector('i').classList.remove('fa-times');
                menuToggle.querySelector('i').classList.add('fa-bars');
            }
        });
    </script>

    <!-- 页脚 -->
    <footer>
        <div class="footer-content">
            <div class="contact-info">
                <h3>联系我们</h3>
                <p>电话：+86 133 8751 6226</p>
                <p>邮箱：QA@qisi.asia</p>
                <p>地址：山东省济南市历城区经十东路28666号(济南超算中心科技园二期4号楼6层)</p>
            </div>
            <div class="social-media">
                <h3>关注我们</h3>
                <div class="social-links">
                    <div class="social-icon">
                        <img src="images/wechat-icon.png" alt="微信" class="icon">
                        <div class="qr-popup">
                            <img src="images/wechat.png" alt="微信二维码" class="qr-code">
                        </div>
                    </div>
                    <div class="social-icon">
                        <img src="images/xiaohongshu-icon.png" alt="小红书" class="icon">
                        <div class="qr-popup">
                            <img src="images/xiaohongshu.png" alt="小红书二维码" class="qr-code">
                        </div>
                    </div>
                    <div class="social-icon">
                        <img src="images/douyin-icon.png" alt="抖音" class="icon">
                        <div class="qr-popup">
                            <img src="images/douyin.png" alt="抖音二维码" class="qr-code">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2024 哈萨克国立大学中国区招生办公室. 保留所有权利.</p>
        </div>
    </footer>
</body>
</html>
